<div [ngClass]="{'container-fluid': fullWidth, 'container': !fullWidth}" class="page">

  <ng-container *ngIf="page$ | async as page; else loader">
      <h1 class="page-title">
        <fa-icon *ngIf="page.icon" [icon]="page.icon" class="mr-3"></fa-icon>
        <span>{{page.title}}</span>
      </h1>
      <div class="page-image" *ngIf="page.hasImageLoaded">
        <img [src]="page.image.location" alt="page-picture" class="img-fluid mx-auto d-block"/>
      </div>
      <div class="page-description mt-1" [innerHTML]="page.description | safeHtml">
      </div>
      <ng-container *ngTemplateOutlet="pageButtonBarTpl ? pageButtonBarTpl : defaultButtonBar">
      </ng-container>
      <ng-template #defaultButtonBar>
        <div class="justify-content-between d-flex">
          <a *ngFor="let file of page.files" mat-stroked-button [href]="file.location" target="_blank">
            <fa-icon [icon]="file.getIcon" size="lg" class="mr-2"></fa-icon>{{file.title}}
          </a>
          <button mat-stroked-button [routerLink]="['/', 'faq']">
            <fa-icon icon="question-circle" size="lg" class="mr-2"></fa-icon>FAQ
          </button>
        </div>
      </ng-template>
      <ng-container *ngTemplateOutlet="pageContentTpl"></ng-container>
  </ng-container>

  <ng-template #loader>
    <div  #loader class="w-100 flex-grow-1 justify-content-center align-items-center d-flex">
      <mat-spinner color="primary"></mat-spinner>
    </div>
  </ng-template>
</div>

